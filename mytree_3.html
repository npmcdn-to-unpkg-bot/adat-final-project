<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>Week 8: Treess</title>
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
    
  <link rel="stylesheet" href="t-style.css">
    

</head>
<body>
<div class='header section'>
  <div class='container'>
    <h1>Week 8: Some text</h1>
    <p>More text</p>

  </div>
</div>
<div class='controls section'>
  <div class='container'>
    <div class='btn-toolbar'>
      <label for='region'>Country or Region: </label>
      <select id='region-select'>
        <option value='total'>Total</option>
        <option value='Belgium'>Belgium</option>
        <option value='EU'>EU</option>
        <option value='France'>France</option>
      </select>
    </div>
  </div>
</div>
<div class='main section'>
  <div class='container'>
    <div id='chart'></div>
  </div>
</div>
    
<div class="main section">
  <div class="container">
    <div class="row">
      <div id="chart1" class="col-md-6"></div>
      <div id="chart2" class="col-md-6"></div>
    </div>
  </div>
</div>
    
<!--    <script type='text/javascript' src='https://npmcdn.com/d3@3.5.17/d3.min.js'></script>
    <script type='text/javascript' src='https://npmcdn.com/science@1.9.3/science.v1.min.js'></script>
    <script type='text/javascript' src='https://npmcdn.com/simple-statistics@2.0.0/dist/simple-statistics.min.js'></script>
    <script type="text/javascript" src="https://npmcdn.com/d3-tip@0.6.7/index.js"></script>-->
<form>
  <label><input type="radio" name="mode" value="size" checked> Size</label>
  <label><input type="radio" name="mode" value="count"> Count</label>
</form>
<script src="//d3js.org/d3.v3.min.js"></script>    
<script>
    
    var color = d3.scale.category20c();
    
    var margin = {top: 20, right: 5, bottom: 10, left: 5},
    width = 1200 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;    
    
            
var treemap = d3.layout.treemap()
    .size([width, height])
    .sticky(true)
    .value(function(d) { return d.size; });
    
// console.log('tree', treemap);

var div = d3.select("body").append("div")
    .style("position", "relative")
    .style("width", (width + margin.left + margin.right) + "px")
    .style("height", (height + margin.top + margin.bottom) + "px")
    .style("left", margin.left + "px")
    .style("top", margin.top + "px");

//d3.json("flare2.json", function(error, root) {
 d3.json("expo2.json", function(error, root) {
    if (error) throw error;

  var node = div.datum(root).selectAll(".node")
      .data(treemap.nodes)
    .enter().append("div")
      .attr("class", "node")
      .call(position)
      .style("background", function(d) { return d.children ? color(d.name) : null; })
//    .append('div')
  .text(function(d) { return d.children ? null : d.name; });


  d3.selectAll("input").on("change", function change() {
    var value = this.value === "count"
        ? function() { return 1; }
        : function(d) { return d.size; }; 
//    d3.selectAll('input')
//    var value = 'size';


      
      
    node
        .data(treemap.value(value).nodes)
      .transition()
        .duration(1500)
        .call(position);
    
    
    
  });
});

function position() {
  this.style("left", function(d) { return d.x + "px"; })
      .style("top", function(d) { return d.y + "px"; })
      .style("width", function(d) { return Math.max(0, d.dx - 1) + "px"; })
      .style("height", function(d) { return Math.max(0, d.dy - 1) + "px"; });
}    
        
    
</script>    
    
    
</body>
</html> 

